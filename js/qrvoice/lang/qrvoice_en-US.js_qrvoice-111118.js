/* Copyright (c) 2011, Marcel Duran */
YUI.add("lang/qrvoice_en-US",function(a){"use strict",a.Intl.add("qrvoice","en-US",{direction:"ltr",tagline:"when a picture is worth a hundred characters",help:"help",faq:"f.a.q",faqFile:"faq_en-US.html",placeholder:"say what?",msgTitle:"text to speech (100 characters maximum length)",genLabel:"generate",genTitle:"generate qr-voice",whichLang:"in {lang}",spokenLang:"Spoken language",langs:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",hy:"Armenian",ca:"Catalan",zh:"Chinese",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",fi:"Finnish",fr:"French",de:"German",el:"Greek",ht:"Haitian Creole",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",it:"Italian",ja:"Japanese",ko:"Korean",la:"Latin",lv:"Latvian",mk:"Macedonian",no:"Norwegian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",es:"Spanish",sw:"Swahili",sv:"Swedish",ta:"Tamil",tr:"Turkish",vi:"Vietnamese",cy:"Welsh"},langsNote:"languages for playback only, not for translation",resizeTitle:"resize qr-code",linkTitle:"link to this qr-code image",imgTitle:"qr-code to message playback, save/scan this image or copy link above",facebookButton:"Like",twitterButton:"Tweet",intls:{"en-US":{name:"English (United States)"},"pt-BR":{name:"Portuguese",ownName:"portuguÃªs (Brasil)"}},intlsTitle:"user interface language",disclaimer:"disclaimer: qrvoice is not affiliated with Yahoo!&trade; Inc., Google&trade; Inc. or bitly&trade; Inc. in any way."})},"0.0.5");YUI.add("qrvoice",function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q="qrvoice",r=q,s="R_039525bc02a0dbe1e6456752fdc17997",t="http://my.qrvoice.net/",u="http://api.bitly.com/v3/shorten?login="+r+"&apiKey="+s+"&longUrl={url}&format=json&callback={callback}",v="http://translate.google.com/translate_tts?ie=UTF-8&q={msg}&tl={lang}",w="http://chart.apis.google.com/chart?cht=qr&choe=UTF-8&chs={size}x{size}&chl={url}",x="http://www.facebook.com/sharer.php?t=QR%20voice&u=http%253A%252F%252Fqrvoice.net%2F%3Fid%3D{id}",y="http://twitter.com/share?source=tweetbutton&text=QR%20voice&url=http%3A%2F%2Fqrvoice.net%2F%3Fid%3D{id}",z=33,A=547,B=10,C="hidden",D="lng-sel",E="invis",F=".lbl",G="body",H="#qrlink",I="#qrcopy",J="#help",K="#lang",L=a.one,M=a.Intl,N=M.get(q),O=a.Lang,P=O.sub,Q=a.config.win,R=Q.location,S=Q.navigator,T=a.StorageLite,U=T.getItem,V=T.setItem,W=a.Node,X=W.create,Y=a.Object.each,Z=W.getDOMNode,$=encodeURIComponent,_=Math.round,ba=null,bb="value",bc="lang",bd="placeholder",be="title",bf="click",bg="size",bh="rtl",bi="id",bj="href",bk=/[\d\w\-_]/g,bl=N.langs,bm=S.userLanguage||S.language,bn=bm.slice(0,2).toLowerCase(),bo=0,bp=L(G),bq=L("#form"),br=L("#msg"),bs=L("#size"),bt=L("#slider-thumb"),bu=L("#qrcode-wrp"),bv=L(H),bw=L(I),bx=Z(bw),by=L("#slider-box"),bz=L("#lang-lst"),bA=L("#lang-name"),bB=L("#social .facebook"),bC=L("#social .twitter"),bD=L("#help-panel"),bE=(new a.apm.SimpleSlider({node:by})).render(),bF=function(){var a=Q.history;return a&&a.replaceState?function(b){a.replaceState(ba,ba,b?"?"+b:"/")}:function(a){R.hash=a}}(),bG=function(a,b){br.get(bb)||f.setXY(b||br.getXY()),a&&a.halt()},bH=function(){return k==="zh"?"zh-CN":k},bI=function(a){bl.hasOwnProperty(a)||(a="en"),k=a,br.set(bc,bH()),bA.setContent(P(N.whichLang,{lang:bl[a]})),V(bc,a)},bJ=function(a,b){var c,d,e=a&&a.data;if(!e)return;c=e.url,d=e.hash,p||(p=X(P('<img id="qrcode" alt="{alt}">',{alt:N.imgTitle})),bu.append(p)),p.set("src",c),bu.set(bj,c),bv.set(bj,c).setContent(c),bB.set(bj,P(x,{id:d})),bC.set(bj,P(y,{id:d})),b||bF("id="+d)},bK=function(b){var c,d,e=b&&b.data;if(!e)return;c=P(w,{size:h,url:$(e.url)}),d=P(u,{url:$(c)}),a.jsonp(d,{on:{success:bJ}})},bL=function(b){var c,d,e=br.get(bb),f=bH();b.halt(),e&&(l!==e||m!==f)&&(l=e,m=f,e=$(e),c=P(v,{msg:e,lang:f}),d=P(u,{url:$(c)}),a.jsonp(d,{on:{success:bK}}))};bp.setStyle("visibility","visible"),bq.on("submit",bL),bp.delegate(bf,function(a){a.halt(),bz.toggleClass(C)},K),bp.delegate(bf,function(a){a.halt(),bD.setStyle("background","url(/images/help.jpg) no-repeat").toggleClass(E)},J),bp.delegate(bf,function(a){a.target.ancestor(K)||bz.addClass(C),a.target.test(J)||bD.addClass(E)},G),bp.delegate(bf,function(a){var b=a.target;a.preventDefault(),L("#lng-"+k).removeClass(D),b.addClass(D),bI(b.get(bi).slice(4))},".lng"),bp.delegate("mouseover",function(){bv.addClass(E),bw.removeClass(E).set(bb,bv.getContent()),bx.focus(),bx.select()},H),bp.delegate("mouseout",function(){bv.removeClass(E),bw.addClass(E)},I),bE.on("valueChange",function(a){var c=o||_(a.newVal[0]*b)+z;o=0,c=c<z?z:c>A?A:c,h=c,V(bg,c),bs.setContent(c+"x"+c),bu.setStyles({height:c,width:c})}),d=R.search,c=d.lastIndexOf("/"),c=c>-1?c:d.length,e=d.slice(1,c).split("&").concat(R.hash.slice(1).split("&")),a.Array.some(e,function(a){var b=a.split("="),c=b[1];if(b[0]===bi&&bk.test(c))return bJ({data:{url:t+c,hash:c}},1),1}),N.direction===bh&&bp.addClass(bh),L(J).setContent(N.help).set(bj,N.faqFile).removeClass(C),L("#faq").setContent(N.faq).set(bj,N.faqFile),L("#tagline").setContent(N.tagline),br.set(bd,N.placeholder).set(be,N.msgTitle),L("#lbl-msg").setContent(N.msgTitle),L("#gen").set(be,N.genTitle),L("#lbl-gen").setContent(N.genLabel),bt.set(be,N.resizeTitle),bv.set(be,N.linkTitle),bu.set(be,N.imgTitle),L("#lbl-intls").setContent(N.intlsTitle),L("#disclaimer").setContent(N.disclaimer),bB.one(F).setContent(N.facebookButton),bC.one(F).setContent(N.twitterButton),O.isUndefined(Z(X("<input>"))[bd])&&(f=X(P('<label class="{cls}" for="msg">{lbl}</label>',{cls:bd,lbl:N.placeholder})),bq.append(f),bG(),br.on("focus",bG,ba,[0,-1e4]),br.on("blur",bG)),j="",g=M.getLang(q),Y(N.intls,function(a,b){var c=a.ownName;j+=P('<option value="{key}"{sel}>{opt}</option>',{key:b,sel:b===g?" selected":"",opt:a.name+(c?" - "+c:"")})}),i=X(P('<select id="intls" title="{title}">{opts}</select>',{title:N.intlsTitle,opts:j})),bp.one("#intls-wrp").append(i),i.on("change",function(){var a=i.get("options").item(i.get("selectedIndex")).get(bb);V("intl",a),R.reload()}),T.on("storage-lite:ready",function(){n=parseInt(by.getStyle("width"),10),b=(A-z+1)/n,h=U(bg),h?o=h:h=n,bE.update([_((h-z)/b),0]),bt.removeClass(C),bu.removeClass(C),bI(U(bc)||bn),j=P('<div id="lang-hd">{title}</div><ul class="lang-col">',{title:N.spokenLang}),Y(bl,function(a,b){j+=P('<li><a class="lng{cls}" href="#" id="lng-{id}">{name}</a></li>',{cls:b===k?" "+D:"",id:b,name:a}),bo+=1,bo%B===0&&(j+='</ul><ul class="lang-col">')}),j+=P('</ul><div id="lang-ft">{note}</div>',{note:N.langsNote}),bz.setContent(j)})},"0.0.5",{lang:["en-US","pt-BR"],requires:["node","json","jsonp","dd-constrain","gallery-center","gallery-simpleslider","gallery-storage-lite"]})