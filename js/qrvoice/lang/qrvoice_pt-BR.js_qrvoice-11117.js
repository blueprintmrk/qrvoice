/* Copyright (c) 2011, Marcel Duran */
YUI.add("lang/qrvoice_pt-BR",function(a){"use strict",a.Intl.add("qrvoice","pt-BR",{direction:"ltr",tagline:"quando uma imagem vale literalmente mil palavras",placeholder:"dizer o quê?",msgTitle:"texto à ser falado (no máximo 99 caracteres)",genLabel:"gerar",genTitle:"gerar qr-voice",whichLang:"em {lang}",spokenLang:"Língua falada",langs:{af:"africâner",sq:"albanês",ar:"árabe",hy:"armênio",ca:"catalão",zh:"chinês",hr:"croata",cs:"tcheco",da:"dinamarquês",nl:"holandês",en:"inglês",fi:"finlandês",fr:"francês",de:"alemão",el:"grego",ht:"crioulo haitiano",hi:"hindi",hu:"húngaro",is:"islandês",id:"indonésio",it:"italiano",ja:"japonês",ko:"coreano",la:"latim",lv:"letão",mk:"macedônio",no:"norueguês",pl:"polonês",pt:"português",ro:"romeno",ru:"russo",sr:"sérvio",sk:"eslovaco",es:"espanhol",sw:"suaíli",sv:"sueco",ta:"tâmil",tr:"turco",vi:"vietnamita",cy:"galês"},langsNote:"línguas para reprodução de áudio, não para tradução",resizeTitle:"redimensionar qr-code",linkTitle:"link para esta imagem de qr-code",imgTitle:"qr-code para reproduzir a mensagem, salve/capture esta imagem ou copie o link acima",facebookButton:"Curtir",twitterButton:"Tweetar",intls:{"en-US":{name:"inglês (Estados Unidos)",ownName:"English (United States)"},"pt-BR":{name:"português (Brasil)"}},intlsTitle:"idioma da interface do usuário",disclaimer:"nota: qrvoice não é afiliado ao Yahoo!&trade; Inc., Google&trade; Inc. ou bitly&trade; Inc. em qualquer forma."})},"0.0.4");YUI.add("qrvoice",function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q="qrvoice",r=q,s="R_039525bc02a0dbe1e6456752fdc17997",t="http://my.qrvoice.net/",u="http://api.bitly.com/v3/shorten?login="+r+"&apiKey="+s+"&longUrl={url}&format=json&callback={callback}",v="http://translate.google.com/translate_tts?ie=UTF-8&q={msg}&tl={lang}",w="http://chart.apis.google.com/chart?cht=qr&choe=UTF-8&chs={size}x{size}&chl={url}",x="http://www.facebook.com/sharer.php?t=QR%20voice&u=http%253A%252F%252Fqrvoice.net%2F%3Fid%3D{id}",y="http://twitter.com/share?source=tweetbutton&text=QR%20voice&url=http%3A%2F%2Fqrvoice.net%2F%3Fid%3D{id}",z=33,A=547,B=10,C="hidden",D="lng-sel",E="invis",F=".lbl",G="body",H="#qrlink",I="#qrcopy",J=a.one,K=a.Intl,L=K.get(q),M=a.Lang,N=M.sub,O=a.config.win,P=O.location,Q=O.navigator,R=a.StorageLite,S=R.getItem,T=R.setItem,U=a.Node,V=U.create,W=a.Object.each,X=U.getDOMNode,Y=encodeURIComponent,Z=Math.round,$=null,_="value",ba="lang",bb="placeholder",bc="title",bd="click",be="size",bf="rtl",bg="id",bh="href",bi=/[\d\w\-_]/g,bj=L.langs,bk=Q.userLanguage||Q.language,bl=bk.slice(0,2).toLowerCase(),bm=0,bn=J(G),bo=bn.one("#form"),bp=bo.one("#msg"),bq=bn.one("#size"),br=bn.one("#slider-thumb"),bs=bn.one("#qrcode-wrp"),bt=bn.one(H),bu=bn.one(I),bv=X(bu),bw=bn.one("#slider-box"),bx=bo.one("#lang-lst"),by=bo.one("#lang"),bz=bo.one("#lang-name"),bA=bn.one("#social .facebook"),bB=bn.one("#social .twitter"),bC=(new a.apm.SimpleSlider({node:bw})).render(),bD=function(){var a=O.history;return a&&a.replaceState?function(b){a.replaceState($,$,b?"?"+b:"/")}:function(a){P.hash=a}}(),bE=function(a,b){bp.get(_)||f.setXY(b||bp.getXY()),a&&a.halt()},bF=function(){return k==="zh"?"zh-CN":k},bG=function(a){bj.hasOwnProperty(a)||(a="en"),k=a,bp.set(ba,bF()),bz.setContent(N(L.whichLang,{lang:bj[a]})),T(ba,a)},bH=function(a,b){var c,d,e=a&&a.data;if(!e)return;c=e.url,d=e.hash,p||(p=V(N('<img id="qrcode" alt="{alt}">',{alt:L.imgTitle})),bs.append(p)),p.set("src",c),bs.set(bh,c),bt.set(bh,c).setContent(c),bA.set(bh,N(x,{id:d})),bB.set(bh,N(y,{id:d})),b||bD("id="+d)},bI=function(b){var c,d,e=b&&b.data;if(!e)return;c=N(w,{size:h,url:Y(e.url)}),d=N(u,{url:Y(c)}),a.jsonp(d,{on:{success:bH}})},bJ=function(b){var c,d,e=bp.get(_),f=bF();b.halt(),e&&(l!==e||m!==f)&&(l=e,m=f,e=Y(e),c=N(v,{msg:e,lang:f}),d=N(u,{url:Y(c)}),a.jsonp(d,{on:{success:bI}}))};bo.on("submit",bJ),bn.delegate(bd,function(a){a.halt(),bx.toggleClass(C)},"#lang"),bn.delegate(bd,function(a){var b=function(a){return a===by};a.target.ancestor(b)||bx.addClass(C)},G),bn.delegate(bd,function(a){var b=a.target;a.preventDefault(),J("#lng-"+k).removeClass(D),b.addClass(D),bG(b.get(bg).slice(4))},".lng"),bn.delegate("mouseover",function(){bt.addClass(E),bu.removeClass(E).set(_,bt.getContent()),bv.focus(),bv.select()},H),bn.delegate("mouseout",function(){bt.removeClass(E),bu.addClass(E)},I),bC.on("valueChange",function(a){var c=o||Z(a.newVal[0]*b)+z;o=0,c=c<z?z:c>A?A:c,h=c,T(be,c),bq.setContent(c+"x"+c),bs.setStyles({height:c,width:c})}),d=P.search,c=d.lastIndexOf("/"),c=c>-1?c:d.length,e=d.slice(1,c).split("&").concat(P.hash.slice(1).split("&")),a.Array.some(e,function(a){var b=a.split("="),c=b[1];if(b[0]===bg&&bi.test(c))return bH({data:{url:t+c,hash:c}},1),1}),L.direction===bf&&bn.addClass(bf),J("#tagline").setContent(L.tagline),bp.set(bb,L.placeholder).set(bc,L.msgTitle),J("#lbl-msg").setContent(L.msgTitle),J("#gen").set(bc,L.genTitle),J("#lbl-gen").setContent(L.genLabel),br.set(bc,L.resizeTitle),bt.set(bc,L.linkTitle),bs.set(bc,L.imgTitle),J("#lbl-intls").setContent(L.intlsTitle),J("#disclaimer").setContent(L.disclaimer),bA.one(F).setContent(L.facebookButton),bB.one(F).setContent(L.twitterButton),M.isUndefined(X(V("<input>"))[bb])&&(f=V(N('<label class="{cls}" for="msg">{lbl}</label>',{cls:bb,lbl:L.placeholder})),bo.append(f),bE(),bp.on("focus",bE,$,[0,-1e4]),bp.on("blur",bE)),j="",g=K.getLang(q),W(L.intls,function(a,b){var c=a.ownName;j+=N('<option value="{key}"{sel}>{opt}</option>',{key:b,sel:b===g?" selected":"",opt:a.name+(c?" - "+c:"")})}),i=V(N('<select id="intls" title="{title}">{opts}</select>',{title:L.intlsTitle,opts:j})),bn.one("#intls-wrp").append(i),i.on("change",function(){var a=i.get("options").item(i.get("selectedIndex")).get(_);T("intl",a),P.reload()}),R.on("storage-lite:ready",function(){n=parseInt(bw.getStyle("width"),10),b=(A-z+1)/n,h=S(be),h?o=h:h=n,bC.update([Z((h-z)/b),0]),br.removeClass(C),bs.removeClass(C),bG(S(ba)||bl),j=N('<div id="lang-hd">{title}</div><ul class="lang-col">',{title:L.spokenLang}),W(bj,function(a,b){j+=N('<li><a class="lng{cls}" href="#" id="lng-{id}">{name}</a></li>',{cls:b===k?" "+D:"",id:b,name:a}),bm+=1,bm%B===0&&(j+='</ul><ul class="lang-col">')}),j+=N('</ul><div id="lang-ft">{note}</div>',{note:L.langsNote}),bx.setContent(j)})},"0.0.4",{lang:["en-US","pt-BR"],requires:["node","json","jsonp","dd-constrain","gallery-center","gallery-simpleslider","gallery-storage-lite"]})